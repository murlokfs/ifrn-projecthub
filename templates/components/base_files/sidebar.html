{% load static %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'base_files/sidebar.css' %}?v=20251113_2">

<nav id="sidebar" class="{% if sidebar_open %}open-sidebar{% endif %}" tabindex="-1">
    <div id="sidebar_content">
        <div id="title_sidebar">
            <img src="{% static 'img/Logo Oficial.png' %}" alt="logo-prisma" id="logo_sidebar">
            <p id="title" class="item_description brand-name">PRISMA</p>
        </div>

        <ul id="side_items">
            <li class="side_item {% if active_page == 'feed' %}active{% endif %}">
                <a href="{% url 'index' %}">
                    <i class="fa-solid fa-couch"></i>
                    <span class="item_description">Feed</span>
                </a>
            </li>
            <li class="side_item {% if active_page == 'my_projects' %}active{% endif %}">
                <a href="{% url 'my_projects' %}">
                    <i class="fa-solid fa-folder-closed"></i>
                    <span class="item_description">Meus Projetos</span>
                </a>
            </li>
            {% if request.user.role == 'admin' or request.user.role == 'teacher' %}
            <li class="side_item {% if active_page == 'project_approval' %}active{% endif %}">
                <a href="{% url 'project_approval' %}">
                    <i class="fa-solid fa-solidLarge fa-vote-yea">‌</i>
                    <span class="item_description">Aprovações</span>
                </a>
            </li>
            {% endif %}
            <li class="side_item {% if active_page == 'settings' %}active{% endif %}">
                <a href="#">
                    <i class="fa-solid fa-gear"></i>
                    <span class="item_description">Configurações</span>
                </a>
            </li>
        </ul>

        <button id="open_btn" type="button">
            <i id="open_btn_icon" class="fa-solid fa-chevron-right"></i>
        </button>
    </div>

    <div id="sidebar_end">
        
        {% if request.user.is_authenticated %}
            
            <div id="user" class="{% if active_page == 'profile' %}active{% endif %}">
                <a id="user_btn" class="{% if active_page == 'profile' %}active{% endif %}" href="{% url 'profile' request.user.pk %}">
                    
                    {% if request.user.image %}
                        <img src="{{ request.user.image }}" 
                        {% if request.user.role == 'alumni' %}
                        style="filter: grayscale(100%);"
                        {% endif %}
                        alt="imagem do usuário" id="img_user">
                    {% else %}
                        <img src="{% static 'img/profile/avatar.jpg' %}" alt="avatar padrão" id="img_user">
                    {% endif %}

                    <p id="user_infos">
                        <span class="item_description">
                            {{ request.user.first_name }}
                        </span>
                        <span class="item_description">
                            @{{ request.user.username }}
                        </span>
                    </p>
                </a>
            </div>

            <div id="logout">
                <a id="logout_btn" href="{% url 'logout' %}">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i>
                    <span class="item_description" id="logout_text">Logout</span>
                </a>
            </div>

        {% else %}
            
            <div id="user">
                <a id="user_btn" href="{% url 'login' %}">
                    <div style="width: 35px; height: 35px; background: #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                        <i class="fa-solid fa-user" style="color: #555;"></i>
                    </div>
                    <p id="user_infos">
                        <span class="item_description" style="font-weight: bold;">Fazer Login</span>
                    </p>
                </a>
            </div>

        {% endif %}

    </div>
</nav>

<script src="{% static 'base_files/js/sidebar.js' %}"></script>